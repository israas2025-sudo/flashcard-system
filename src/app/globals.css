@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Font Imports
   ============================================ */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

@font-face {
  font-family: "Amiri";
  src: url("https://fonts.gstatic.com/s/amiri/v27/J7aRnpd8CGxBHqUrtA.woff2")
    format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Amiri";
  src: url("https://fonts.gstatic.com/s/amiri/v27/J7acnpd8CGxBHp2VkZY.woff2")
    format("woff2");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "KFGQPC";
  src: url("/fonts/KFGQPC-Uthmanic-Script-HAFS.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* ============================================
   Stripe-Inspired CSS Custom Properties
   ============================================ */
:root {
  /* Surface colors — Stripe light palette */
  --surface-0: #F6F8FA;
  --surface-1: #FFFFFF;
  --surface-2: #F6F9FC;
  --surface-3: #E3E8EE;

  /* Text colors — Stripe ink hierarchy */
  --text-primary: #0A2540;
  --text-secondary: #596773;
  --text-tertiary: #8792A2;
  --text-placeholder: #A3ACB9;
  --text-inverse: #ffffff;

  /* Language accent colors */
  --lang-arabic: #f59e0b;
  --lang-quran: #14b8a6;
  --lang-spanish: #f97316;
  --lang-english: #64748b;
  --lang-egyptian: #8b5cf6;
  --lang-primary: #635BFF;

  /* Rating colors */
  --rating-again: #DF1B41;
  --rating-hard: #C77A0B;
  --rating-good: #635BFF;
  --rating-easy: #228403;

  /* Spacing scale (4px base) */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;
  --space-12: 48px;

  /* Border radius — Stripe values */
  --radius-sm: 4px;
  --radius-md: 6px;
  --radius-lg: 8px;
  --radius-xl: 12px;

  /* Shadows — exact Stripe shadow system */
  --shadow-card: 0 2px 5px 0 rgba(0, 0, 0, 0.05), 0 1px 1px 0 rgba(0, 0, 0, 0.03);
  --shadow-card-hover: 0 7px 14px 0 rgba(0, 0, 0, 0.07), 0 3px 6px 0 rgba(0, 0, 0, 0.05);
  --shadow-elevated: 0 15px 35px 0 rgba(0, 0, 0, 0.1), 0 5px 15px 0 rgba(0, 0, 0, 0.06);
  --shadow-button: 0 1px 3px 0 rgba(0, 0, 0, 0.08), 0 1px 1px 0 rgba(0, 0, 0, 0.04);
  --shadow-focus: 0 0 0 3px rgba(99, 91, 255, 0.25);

  /* Transitions */
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
}

.dark {
  --surface-0: #0E1117;
  --surface-1: #1C2128;
  --surface-2: #242B34;
  --surface-3: #2E3742;

  --text-primary: #E6EDF3;
  --text-secondary: #9CA3AF;
  --text-tertiary: #6B7280;
  --text-placeholder: #42505E;
  --text-inverse: #0E1117;

  --shadow-card: 0 2px 5px 0 rgba(0, 0, 0, 0.2), 0 1px 1px 0 rgba(0, 0, 0, 0.15);
  --shadow-card-hover: 0 7px 14px 0 rgba(0, 0, 0, 0.25), 0 3px 6px 0 rgba(0, 0, 0, 0.2);
  --shadow-elevated: 0 15px 35px 0 rgba(0, 0, 0, 0.35), 0 5px 15px 0 rgba(0, 0, 0, 0.25);
  --shadow-button: 0 1px 3px 0 rgba(0, 0, 0, 0.3), 0 1px 1px 0 rgba(0, 0, 0, 0.2);
}

/* ============================================
   Base Styles
   ============================================ */
@layer base {
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
      "Helvetica Neue", Ubuntu, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    background-color: var(--surface-0);
    color: var(--text-primary);
    min-height: 100vh;
    transition: background-color 0.15s ease, color 0.15s ease;
  }

  ::selection {
    background-color: #635BFF;
    color: white;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--text-tertiary);
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
  }
}

/* ============================================
   Component Utilities
   ============================================ */
@layer components {
  /* Glass morphism */
  .glass {
    background: rgba(255, 255, 255, 0.85);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid var(--surface-3);
  }

  .dark .glass {
    background: rgba(28, 33, 40, 0.85);
    border: 1px solid var(--surface-3);
  }

  /* Animated gradient button — Stripe blurple */
  .btn-gradient {
    background: linear-gradient(135deg, #635BFF, #7A73FF, #635BFF);
    background-size: 200% 200%;
    animation: gradientShift 3s ease infinite;
  }

  @keyframes gradientShift {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  /* Card styles */
  .flashcard-container {
    perspective: 1200px;
    transform-style: preserve-3d;
  }

  .flashcard-face {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Arabic text styling */
  .arabic-text {
    font-family: "Amiri", "KFGQPC", serif;
    direction: rtl;
    text-align: right;
    line-height: 2;
    font-size: 1.3em;
  }

  .quran-text {
    font-family: "KFGQPC", "Amiri", serif;
    direction: rtl;
    text-align: center;
    line-height: 2.2;
    font-size: 1.5em;
    color: var(--lang-quran);
  }

  /* Shimmer effect — Stripe skeleton */
  .shimmer {
    background: linear-gradient(
      90deg,
      #F0F2F5 25%,
      #E3E8EE 50%,
      #F0F2F5 75%
    );
    background-size: 200% 100%;
    animation: shimmer 1.5s ease-in-out infinite;
  }

  .dark .shimmer {
    background: linear-gradient(
      90deg,
      var(--surface-2) 25%,
      var(--surface-3) 50%,
      var(--surface-2) 75%
    );
    background-size: 200% 100%;
  }

  /* Progress bar eased fill */
  .progress-eased {
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Focus ring — Stripe blurple */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  .dark .focus-ring {
    @apply focus:ring-offset-surface-0;
  }

  /* Sidebar nav item — Stripe dashboard style */
  .nav-item {
    @apply flex items-center gap-2.5 px-4 py-1.5 rounded-md text-sm font-medium transition-all duration-100;
    color: var(--text-secondary);
    margin: 1px 8px;
  }

  .nav-item:hover {
    background-color: var(--surface-2);
    color: var(--text-primary);
  }

  .dark .nav-item:hover {
    background-color: var(--surface-2);
  }

  .nav-item.active {
    background-color: #F5F4FF;
    color: #635BFF;
    font-weight: 600;
  }

  .dark .nav-item.active {
    background-color: rgba(99, 91, 255, 0.12);
    color: #7A73FF;
  }
}

/* ============================================
   Utility Animations
   ============================================ */
@layer utilities {
  .animation-delay-100 {
    animation-delay: 100ms;
  }
  .animation-delay-200 {
    animation-delay: 200ms;
  }
  .animation-delay-300 {
    animation-delay: 300ms;
  }

  .perspective-1200 {
    perspective: 1200px;
  }

  .preserve-3d {
    transform-style: preserve-3d;
  }

  .backface-hidden {
    backface-visibility: hidden;
  }

  .rotate-y-180 {
    transform: rotateY(180deg);
  }
}
