@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   Font Imports
   ============================================ */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

@font-face {
  font-family: "Amiri";
  src: url("https://fonts.gstatic.com/s/amiri/v27/J7aRnpd8CGxBHqUrtA.woff2")
    format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Amiri";
  src: url("https://fonts.gstatic.com/s/amiri/v27/J7acnpd8CGxBHp2VkZY.woff2")
    format("woff2");
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "KFGQPC";
  src: url("/fonts/KFGQPC-Uthmanic-Script-HAFS.woff2") format("woff2");
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

/* ============================================
   CSS Custom Properties
   ============================================ */
:root {
  /* Surface colors - Light mode */
  --surface-0: #ffffff;
  --surface-1: #f8fafc;
  --surface-2: #f1f5f9;
  --surface-3: #e2e8f0;

  /* Text colors */
  --text-primary: #0f172a;
  --text-secondary: #475569;
  --text-tertiary: #94a3b8;
  --text-inverse: #ffffff;

  /* Language accent colors */
  --lang-arabic: #f59e0b;
  --lang-quran: #14b8a6;
  --lang-spanish: #f97316;
  --lang-english: #64748b;
  --lang-egyptian: #8b5cf6;
  --lang-primary: #6366f1;

  /* Rating colors */
  --rating-again: #ef4444;
  --rating-hard: #f59e0b;
  --rating-good: #6366f1;
  --rating-easy: #22c55e;

  /* Spacing scale */
  --space-1: 4px;
  --space-2: 8px;
  --space-3: 12px;
  --space-4: 16px;
  --space-5: 20px;
  --space-6: 24px;
  --space-8: 32px;
  --space-10: 40px;
  --space-12: 48px;

  /* Border radius */
  --radius-sm: 6px;
  --radius-md: 10px;
  --radius-lg: 14px;
  --radius-xl: 20px;

  /* Shadows */
  --shadow-card: 0 1px 3px rgba(0, 0, 0, 0.04), 0 1px 2px rgba(0, 0, 0, 0.06);
  --shadow-card-hover: 0 4px 12px rgba(0, 0, 0, 0.08),
    0 2px 4px rgba(0, 0, 0, 0.04);
  --shadow-elevated: 0 10px 30px rgba(0, 0, 0, 0.08),
    0 4px 12px rgba(0, 0, 0, 0.04);

  /* Transitions */
  --ease-out-expo: cubic-bezier(0.16, 1, 0.3, 1);
  --ease-spring: cubic-bezier(0.34, 1.56, 0.64, 1);
}

.dark {
  --surface-0: #0f172a;
  --surface-1: #1e293b;
  --surface-2: #334155;
  --surface-3: #475569;

  --text-primary: #f1f5f9;
  --text-secondary: #94a3b8;
  --text-tertiary: #64748b;
  --text-inverse: #0f172a;

  --shadow-card: 0 1px 3px rgba(0, 0, 0, 0.2), 0 1px 2px rgba(0, 0, 0, 0.3);
  --shadow-card-hover: 0 4px 12px rgba(0, 0, 0, 0.3),
    0 2px 4px rgba(0, 0, 0, 0.2);
  --shadow-elevated: 0 10px 30px rgba(0, 0, 0, 0.4),
    0 4px 12px rgba(0, 0, 0, 0.2);
}

/* ============================================
   Base Styles
   ============================================ */
@layer base {
  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html {
    font-family: "Inter", system-ui, -apple-system, sans-serif;
    font-feature-settings: "cv02", "cv03", "cv04";
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    background-color: var(--surface-0);
    color: var(--text-primary);
    min-height: 100vh;
    transition: background-color 0.3s ease, color 0.3s ease;
  }

  ::selection {
    background-color: #6366f1;
    color: white;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--text-tertiary);
    border-radius: 3px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--text-secondary);
  }
}

/* ============================================
   Component Utilities
   ============================================ */
@layer components {
  /* Glass morphism */
  .glass {
    background: rgba(255, 255, 255, 0.7);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .dark .glass {
    background: rgba(30, 41, 59, 0.7);
    border: 1px solid rgba(255, 255, 255, 0.08);
  }

  /* Animated gradient button */
  .btn-gradient {
    background: linear-gradient(135deg, #6366f1, #818cf8, #6366f1);
    background-size: 200% 200%;
    animation: gradientShift 3s ease infinite;
  }

  @keyframes gradientShift {
    0% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
    100% {
      background-position: 0% 50%;
    }
  }

  /* Card styles */
  .flashcard-container {
    perspective: 1200px;
    transform-style: preserve-3d;
  }

  .flashcard-face {
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Arabic text styling */
  .arabic-text {
    font-family: "Amiri", "KFGQPC", serif;
    direction: rtl;
    text-align: right;
    line-height: 2;
    font-size: 1.3em;
  }

  .quran-text {
    font-family: "KFGQPC", "Amiri", serif;
    direction: rtl;
    text-align: center;
    line-height: 2.2;
    font-size: 1.5em;
    color: var(--lang-quran);
  }

  /* Shimmer effect */
  .shimmer {
    background: linear-gradient(
      90deg,
      transparent 25%,
      rgba(255, 255, 255, 0.3) 50%,
      transparent 75%
    );
    background-size: 200% 100%;
    animation: shimmer 2s linear infinite;
  }

  .dark .shimmer {
    background: linear-gradient(
      90deg,
      transparent 25%,
      rgba(255, 255, 255, 0.08) 50%,
      transparent 75%
    );
    background-size: 200% 100%;
  }

  /* Progress bar eased fill */
  .progress-eased {
    transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Focus ring */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  .dark .focus-ring {
    @apply focus:ring-offset-surface-0;
  }

  /* Sidebar nav item */
  .nav-item {
    @apply flex items-center gap-3 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-150;
    @apply text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-indigo-50;
  }

  .dark .nav-item {
    @apply hover:bg-indigo-950/30;
  }

  .nav-item.active {
    @apply text-primary-600 bg-primary-50;
  }

  .dark .nav-item.active {
    @apply text-primary-400 bg-primary-950;
  }
}

/* ============================================
   Utility Animations
   ============================================ */
@layer utilities {
  .animation-delay-100 {
    animation-delay: 100ms;
  }
  .animation-delay-200 {
    animation-delay: 200ms;
  }
  .animation-delay-300 {
    animation-delay: 300ms;
  }

  .perspective-1200 {
    perspective: 1200px;
  }

  .preserve-3d {
    transform-style: preserve-3d;
  }

  .backface-hidden {
    backface-visibility: hidden;
  }

  .rotate-y-180 {
    transform: rotateY(180deg);
  }
}
